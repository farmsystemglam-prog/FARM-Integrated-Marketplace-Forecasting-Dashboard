<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard – FARM</title>
    <link rel="stylesheet" href="FarmerDashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="logo">
                <img src="FARMLogo.png" alt="FARM Logo" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgZmlsbD0iIzAwNzYzNiIvPgo8cGF0aCBkPSJNMTIgMTNIMTdWMjRIMTJaIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo='">
            </div>
            <nav class="nav-menu">
                <a href="FarmerViewProfile.html">Profile</a>
                <a class="active" href="#">Overview</a>
            </nav>
        </aside>

        <!-- MAIN -->
        <main class="main-content">
            <!-- ICON BAR -->
            <aside class="icon-bar">
                <button id="messageBtn" class="message-img-btn">
                    <img src="chat-icon.png" alt="Messages" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIxIDIwQzIxIDIwIDIwIDIxIDIwIDIxVjE1QzIgMTUgMjAgMTUgMjAgMTVaIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo='">
                    <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                </button>
                <div class="profile-dropdown-container">
                    <button id="profileBtn" class="profile-img-btn">
                        <img src="user-icon.png" alt="Profile" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIxIDIwQzIxIDIwIDIwIDIxIDIwIDIxVjE1QzIgMTUgMjAgMTUgMjAgMTVaIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo='">
                    </button>
                    <div id="dropdownMenu" class="dropdown-menu">
                        <a href="HomePage.html" class="dropdown-item">Log Out</a>
                    </div>
                </div>
            </aside>

            <!-- Breadcrumb -->
            <div class="breadcrumb">
                Overview <span>></span> Dashboard
            </div>

            <div class="divider-top"></div>

            <h2 class="section-title">This Week</h2>

            <!-- Top Statistic Cards -->
            <div class="metrics-row">
                <div class="metric" data-type="air">
                    <p>Air Quality</p>
                    <h3>--%</h3>
                    <p class="label">No Data</p>
                </div>

                <div class="metric" data-type="rain">
                    <p>Rainfall</p>
                    <h3>-- mm</h3>
                    <p class="rain-label">No Data</p>
                </div>

                <div class="metric" data-type="heat">
                    <p>Heat Index</p>
                    <h3>--°C</h3>
                    <p class="heat-label">No Data</p>
                </div>
            </div>

            <!-- Middle Text Section -->
            <div class="text-cards-container">
                <div class="text-card p1">
                    <h3>Optimal Pricing Suggestion</h3>
                    <p>₱310 - ₱330 / Ton</p>
                    <small>Based on regional demand and market activity.</small>
                </div>

                <div class="text-card p2">
                    <h3>High-Demand Crop Alert</h3>
                    <p>Organic Soy</p>
                    <small>Demand has increased 15% in the last 48 hours.</small>
                </div>

                <div class="text-card p3">
                    <h3>Best Time to Post</h3>
                    <p>Tuesdays, 9:00 AM PST</p>
                    <small>73% of buyers log in before 10 AM.</small>
                </div>

                <div class="text-card p4">
                    <h3>Inventory Balancing Tips</h3>
                    <p>Bundle Wheat & Corn</p>
                    <small>Offer a discount to move surplus stock.</small>
                </div>
            </div>

            <!-- Lower Logo Row -->
            <div class="metrics-row logos-row">
                <a href="https://www.da.gov.ph/" target="_blank" class="logo-box">
                    <img src="DeptAgriLogo.png" alt="Logo 1" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIxIDIwQzIxIDIwIDIwIDIxIDIwIDIxVjE1QzIgMTUgMjAgMTUgMjAgMTVaIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo='">
                    <p>Department Of Agriculture</p>
                </a>

                <a href="https://bagong.pagasa.dost.gov.ph/agri-weather#-" target="_blank" class="logo-box">
                    <img src="PAGASALogo.png" alt="Logo 2" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIxIDIwQzIxIDIwIDIwIDIxIDIwIDIxVjE1QzIgMTUgMjAgMTUgMjAgMTVaIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo='">
                    <p>Farm Weather Forecast</p>
                </a>

                <a href="https://www.da.gov.ph/price-monitoring/" target="_blank" class="logo-box">
                    <img src="PriceUpdatesLogo.png" alt="Logo 3" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIxIDIwQzIxIDIwIDIwIDIxIDIwIDIxVjE1QzIgMTUgMjAgMTUgMjAgMTVaIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo='">
                    <p>Crops Price Monitoring</p>
                </a>
            </div>
        </main>

        <!-- RIGHT WEATHER SIDEBAR -->
        <aside class="right-sidebar">
            <div class="weather-card">
                <h1 id="day1-date">--</h1>
                <p class="month" id="day1-month">--</p>
                <div class="temp-box">
                    <span class="temp" id="day1-temp">--°</span>
                    <span class="desc" id="day1-desc">No data</span>
                </div>
            </div>

            <div class="weather-card">
                <h1 id="day2-date">--</h1>
                <p class="month" id="day2-month">--</p>
                <div class="temp-box">
                    <span class="temp" id="day2-temp">--°</span>
                    <span class="desc" id="day2-desc">No data</span>
                </div>
            </div>

            <div class="weather-card">
                <h1 id="day3-date">--</h1>
                <p class="month" id="day3-month">--</p>
                <div class="temp-box">
                    <span class="temp" id="day3-temp">--°</span>
                    <span class="desc" id="day3-desc">No data</span>
                </div>
            </div>
        </aside>
    </div>

    <!-- MESSAGE MODAL -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Messages</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="messages-sidebar">
                    <div class="sidebar-header">
                        <h3>Conversations</h3>
                    </div>
                    <div class="conversations-list" id="conversationsList">
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i> Loading conversations...
                        </div>
                    </div>
                </div>
                
                <div class="chat-area">
                    <div class="chat-header" id="chatHeader">
                        <div class="chat-user-info">
                            <div class="chat-user-avatar"></div>
                            <div class="chat-user-details">
                                <h4 id="chatUserName">Select a conversation</h4>
                                <p id="chatUserStatus">Online</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="messages-container">
                        <div class="messages-list" id="messagesList">
                            <div class="no-messages">Select a conversation to view messages</div>
                        </div>
                    </div>
                    
                    <div class="message-input-container">
                        <input type="text" id="messageInput" placeholder="Type your message...">
                        <button id="sendMessage" class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0"></script>
    <script src="FarmerDashboard.js"></script>
</body>
</html>